<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Simple Framework for Simple Automation • strata</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Simple Framework for Simple Automation">
<meta name="description" content="A tool suite for building project frameworks for users with access to only the most basic of automation tools.">
<meta property="og:description" content="A tool suite for building project frameworks for users with access to only the most basic of automation tools.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">strata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/asenetcky/strata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="strata">strata<a class="anchor" aria-label="anchor" href="#strata"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of strata is to provide a framework for workflow automation and reproducible analyses for R users and teams who may not have access to many modern automation tooling and/or are otherwise resource-constrained. Strata aims to be simple and allow users to adopt it with minimal changes to existing code and use whatever automation they have access to. There is only one target file users will need to automate, <code>main.R</code>, which will run through the entire project with the settings they specified as they build their strata of code. Strata is designed to get out of the users’ way and play nice with packages like <code>renv</code>, <code>cronR</code>, and <code>taskscheduleR</code>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the latest CRAN release, just run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"strata"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of strata from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"asenetcky/strata"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started-using-strata">Getting Started Using <code>strata</code>
<a class="anchor" aria-label="anchor" href="#getting-started-using-strata"></a>
</h2>
<p><code>strata</code> provides users with framework for easier automation with the tools they already have at hand. Users will want to make a folder for their <code>strata</code> project. <code>strata</code> works best when bundled inside of an RStudio project folder and the <code>renv</code> package, but can be made to work without those is desired.</p>
<p>After calling the <code>strata</code> package users will want to start hollowing out spaces for their code to live. Calling <code><a href="reference/build_stratum.html">strata::build_stratum</a></code> and providing a name and path to your project folder will add a ‘stratum’ to project, as well as a <code>main.R</code> script and a <code>.strata.toml</code> file.</p>
<p>Next users will want to call <code><a href="reference/build_lamina.html">strata::build_lamina</a></code> with a name and path to your stratum you created in the previous step. This creates a subfolder of your stratum where you R code will live, as well as a <code>.laminae.toml</code>. It’s good to group like-code together inside of a ‘lamina’. Users can have as many stratum as needed with as many laminae and their associated R scripts that users deem necessary.</p>
<p><code>main.R</code> and its associated function <code>main</code> is the entry point to your project and the target that users will automate the execution of. When executed <code>main</code> will read those <code>.toml</code> files and begin sourcing the pipelines in the order specified by the user/.toml files, and within a stratum it will execute the laminae in the order specified by the user and their specific .toml file. Within a lamina the scripts will be sourced however the user’s operating system has ordered the scripts, often alphabetically.</p>
<p><code>strata</code> provides basic, but consistent logging functions that are used at run time, and are available for use inside of users’ code if they desire.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>Here is a standard example using strata:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/asenetcky/strata" class="external-link">strata</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">file_temp</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">strata</span><span class="fu">::</span><span class="fu"><a href="reference/build_stratum.html">build_stratum</a></span><span class="op">(</span></span>
<span>  project_path <span class="op">=</span> <span class="va">tmp</span>,</span>
<span>  stratum_name <span class="op">=</span> <span class="st">"first_stratum"</span>,</span>
<span>  order <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">stratum_path</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span></span>
<span>    <span class="va">tmp</span>, <span class="st">"strata"</span>, <span class="st">"first_stratum"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">strata</span><span class="fu">::</span><span class="fu"><a href="reference/build_lamina.html">build_lamina</a></span><span class="op">(</span></span>
<span>  stratum_path <span class="op">=</span> <span class="va">stratum_path</span>,</span>
<span>  lamina_name <span class="op">=</span> <span class="st">"first_lamina"</span>,</span>
<span>  order <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">strata</span><span class="fu">::</span><span class="fu"><a href="reference/build_lamina.html">build_lamina</a></span><span class="op">(</span></span>
<span>  stratum_path <span class="op">=</span> <span class="va">stratum_path</span>,</span>
<span>  lamina_name <span class="op">=</span> <span class="st">"second_lamina"</span>,</span>
<span>  order <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lamina_path1</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">stratum_path</span>, <span class="st">"first_lamina"</span><span class="op">)</span></span>
<span><span class="va">lamina_path2</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">stratum_path</span>, <span class="st">"second_lamina"</span><span class="op">)</span></span>
<span><span class="va">code_path1</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">lamina_path1</span>, <span class="st">"my_code1.R"</span><span class="op">)</span></span>
<span><span class="va">code_path2</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">lamina_path2</span>, <span class="st">"my_code2.R"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">my_code1</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">file_create</a></span><span class="op">(</span><span class="va">code_path1</span><span class="op">)</span></span>
<span><span class="va">my_code2</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">file_create</a></span><span class="op">(</span><span class="va">code_path2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">my_code1</span>, <span class="st">"print('Hello, World!')"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">my_code2</span>, <span class="st">"print('Goodbye, World!')"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"main.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3895] INFO: Strata started </span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3901] INFO: Stratum: first_stratum initialized </span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3906] INFO: Lamina: first_lamina initialized </span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3912] INFO: Executing: my_code1 </span></span>
<span><span class="co">#&gt; [1] "Hello, World!"</span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3923] INFO: Lamina: first_lamina finished </span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3926] INFO: Lamina: second_lamina initialized </span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3929] INFO: Executing: my_code2 </span></span>
<span><span class="co">#&gt; [1] "Goodbye, World!"</span></span>
<span><span class="co">#&gt; [2024-11-27 10:54:13.3940] INFO: Strata finished - duration: 0.005 seconds</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/delete.html" class="external-link">dir_delete</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span></code></pre></div>
<p>Users can also opt to use quick build functions if speed is the priority and the naming conventions are not important.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/file_temp.html" class="external-link">file_temp</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">strata</span><span class="fu">::</span><span class="fu"><a href="reference/build_quick_strata_project.html">build_quick_strata_project</a></span><span class="op">(</span></span>
<span>  project_path <span class="op">=</span> <span class="va">tmp</span>,</span>
<span>  num_strata <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  num_laminae_per <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="co">#&gt; /tmp/RtmpZa42UG/file1cb1670b361db</span></span>
<span><span class="co">#&gt; ├── main.R</span></span>
<span><span class="co">#&gt; └── strata</span></span>
<span><span class="co">#&gt;     ├── stratum_1</span></span>
<span><span class="co">#&gt;     │   ├── s1_lamina_1</span></span>
<span><span class="co">#&gt;     │   │   └── my_code.R</span></span>
<span><span class="co">#&gt;     │   └── s1_lamina_2</span></span>
<span><span class="co">#&gt;     │       └── my_code.R</span></span>
<span><span class="co">#&gt;     ├── stratum_2</span></span>
<span><span class="co">#&gt;     │   ├── s2_lamina_1</span></span>
<span><span class="co">#&gt;     │   │   └── my_code.R</span></span>
<span><span class="co">#&gt;     │   └── s2_lamina_2</span></span>
<span><span class="co">#&gt;     │       └── my_code.R</span></span>
<span><span class="co">#&gt;     └── stratum_3</span></span>
<span><span class="co">#&gt;         ├── s3_lamina_1</span></span>
<span><span class="co">#&gt;         │   └── my_code.R</span></span>
<span><span class="co">#&gt;         └── s3_lamina_2</span></span>
<span><span class="co">#&gt;             └── my_code.R</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/delete.html" class="external-link">dir_delete</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=strata" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/asenetcky/strata/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/asenetcky/strata/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing strata</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Alexander Senetcky <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0009-0009-3730-5397" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/asenetcky/strata/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/asenetcky/strata/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/asenetcky/strata" class="external-link"><img src="https://codecov.io/gh/asenetcky/strata/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=strata" class="external-link"><img src="https://www.r-pkg.org/badges/version/strata" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alexander Senetcky.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
